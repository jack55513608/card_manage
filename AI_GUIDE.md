# AI Project Guide: card_manage

purpose: "Go backend API for a card consignment platform."

stack: [Go, Gin, PostgreSQL, Swaggo, Docker]

# Directory Map & Responsibilities
# path: responsibility
dirs:
  /cmd/server/main.go: "Entrypoint, DI, Gin routing."
  /db/migration/: "SQL migrations (.up.sql, .down.sql)."
  /docs/: "AUTOGENERATED by Swag. Do not edit manually."
  /internal/api/: "API layer: HTTP Handlers, request/response structs."
  /internal/model/: "Model layer: DB table structs."
  /internal/repository/: "Repository layer: DB CRUD operations (SQL)."
  /internal/service/: "Service layer: Core business logic."
  /prd.txt: "Product Requirements Document."
  /Makefile: "Project command shortcuts."
  /docker-compose.yml: "Docker service orchestration."
  /Dockerfile: "App's Docker build definition."

# Core Pattern: Layered Architecture
# Request flow: api -> service -> repository
pattern: "API -> Service -> Repository"

# Change Recipes
# task: [file/dir patterns to modify]
recipes:
  new_endpoint:
    - "route: cmd/server/main.go"
    - "handler: internal/api/"
    - "logic: internal/service/"
    - "db: internal/repository/"
  db_schema_change:
    - "migration: db/migration/"
    - "run: make migrate-up"
    - "model: internal/model/"
    - "repo: internal/repository/"
  api_docs_update:
    - "comments: internal/api/"
    - "run: go run github.com/swaggo/swag/cmd/swag init -g cmd/server/main.go"

# Key Commands
commands:
  build_run: "docker-compose up --build -d"
  db_migrate: "make migrate-up"
  gen_docs: "go run github.com/swaggo/swag/cmd/swag init -g cmd/server/main.go"